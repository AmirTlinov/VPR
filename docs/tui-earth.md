# ASCII Earth TUI

Флагманский терминальный режим с вращающейся Землёй. Без рандома и мерцаний, рассчитан на стабильные 24 FPS даже на средних VPS.

## Быстрый старт
- Запуск интерактивного режима: `cargo run -p vpr-tui --release`
- Выход: `q` или `Esc`.
- Дамп одного кадра (для диагностики/скриптов): `cargo run -p vpr-tui --bin frame_dump -- 64 32 0.6 > /tmp/frame.txt`

## Рендер
- 4200 точек по сферической решётке (Fibonacci lattice), поворот на `0.18 rad` за тик, наклон `0.32 rad`.
- Ламбертово освещение по вектору `(0.18, 0.34, 1.0)`; цветовые палитры земли/воды без случайностей.
- Псевдо-рельеф создаётся детерминированными синусами по широте/долготе, чтобы имитировать континенты и полярные шапки.
- Текстурирование через градиент символов ` .,-~:;*O@` плюс цветовые Highlights.
- ratatui + crossterm дают двойную буферизацию и минимальный diff-рендер.

## Производительность
- Юнит-тест `render_frame_is_fast_enough` генерирует 32 кадра 96x40 < 220 мс ⇒ запас > 4× относительно 24 FPS.
- Для терминала 80x24 расчёт одного кадра — ~1.5–2 мс на средних CPU (эмпирика CI), что даёт <50% загрузки одного ядра при 24 FPS.

## Контроль качества
- Снапшот `tests/fixtures/frame.txt` фиксирует форму/теневой рисунок (64x32 @ angle 0.6). Любые регрессии ловятся тестом `globe_frame_matches_fixture`.
- Дополнительные тесты проверяют заполнение экватора и сходящуюся полярную шапку.
- Локальный набор проверок: `cargo fmt -p vpr-tui`, `cargo clippy -p vpr-tui -- -D warnings`, `cargo test -p vpr-tui`.

## Интеграция
- Бинарь `vpr-tui` можно встраивать как отдельный режим в существующий CLI (вызов из main-меню).
- Для embed-превью используйте `frame_dump` и отдайте вывод в любой ANSI-совместимый лог/чат.

## Контроль/UX
- Дефолтные хоткеи: `q`/`Esc` — выход, остальные клавиши игнорируются, чтобы не ломать уже работающие термомониторы.
- Цвета и градиенты рассчитаны под фон по умолчанию; на tput setaf=0/1 гамма остаётся читаемой.
